{"ast":null,"code":"var _jsxFileName = \"/Users/ipsbasak/Desktop/TGA/news-posts-tga/pages/home/index.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport fetch from 'node-fetch';\nimport isEqual from 'lodash/isEqual';\nimport Table from '../home/components/table';\n\nclass HackerApp extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getAPIData\", (newUrl, newPage) => {\n      fetch(`${newUrl}${newPage}`).then(res => res.json().then(response => {\n        this.setState({\n          hits: response.hits,\n          page: newPage,\n          url: newUrl\n        });\n      }));\n    });\n\n    _defineProperty(this, \"onMoreClick\", () => {\n      const {\n        url,\n        page\n      } = this.state;\n      this.getAPIData(url, page + 1);\n    });\n\n    _defineProperty(this, \"onNewClick\", () => {\n      this.getAPIData(`https://hn.algolia.com/api/v1/search_by_date?hitsPerPage=30&page=`, 0);\n    });\n\n    _defineProperty(this, \"onTopClick\", () => {\n      this.getAPIData(`https://hn.algolia.com/api/v1/search?hitsPerPage=30&page=`, 0);\n    });\n\n    this.state = {\n      page: 0,\n      hits: null,\n      url: 'https://hn.algolia.com/api/v1/search?hitsPerPage=30&page='\n    };\n  }\n\n  static async fetchData(url) {\n    const ApiResponse = await fetch(url);\n    const response = await ApiResponse.json();\n    return {\n      initialHits: response.hits\n    };\n  }\n\n  static getInitialProps({\n    req,\n    res\n  }) {\n    return this.fetchData(`https://hn.algolia.com/api/v1/search?hitsPerPage=30&page=0`);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (isEqual(nextProps, this.props) && isEqual(nextState, this.state)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  render() {\n    const {\n      initialHits\n    } = this.props;\n    const {\n      page,\n      hits\n    } = this.state;\n    return __jsx(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    }, __jsx(Table, {\n      hits: hits || initialHits,\n      onMoreClick: this.onMoreClick,\n      onNewClick: this.onNewClick,\n      onTopClick: this.onTopClick,\n      pageNumber: page,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default HackerApp;","map":{"version":3,"sources":["/Users/ipsbasak/Desktop/TGA/news-posts-tga/pages/home/index.js"],"names":["React","Component","fetch","isEqual","Table","HackerApp","constructor","props","newUrl","newPage","then","res","json","response","setState","hits","page","url","state","getAPIData","fetchData","ApiResponse","initialHits","getInitialProps","req","shouldComponentUpdate","nextProps","nextState","render","onMoreClick","onNewClick","onTopClick"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,YAAlB;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,KAAP,MAAkB,0BAAlB;;AAEA,MAAMC,SAAN,SAAwBJ,SAAxB,CAAkC;AAChCK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,wCA6BN,CAACC,MAAD,EAASC,OAAT,KAAqB;AAChCP,MAAAA,KAAK,CAAE,GAAEM,MAAO,GAAEC,OAAQ,EAArB,CAAL,CACGC,IADH,CACQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,GAAWF,IAAX,CAAgBG,QAAQ,IAAI;AACvC,aAAKC,QAAL,CAAc;AACZC,UAAAA,IAAI,EAAEF,QAAQ,CAACE,IADH;AAEZC,UAAAA,IAAI,EAAEP,OAFM;AAGZQ,UAAAA,GAAG,EAAET;AAHO,SAAd;AAKD,OANY,CADf;AASD,KAvCkB;;AAAA,yCAyCL,MAAM;AAClB,YAAM;AAAES,QAAAA,GAAF;AAAOD,QAAAA;AAAP,UAAgB,KAAKE,KAA3B;AACA,WAAKC,UAAL,CAAgBF,GAAhB,EAAqBD,IAAI,GAAG,CAA5B;AACD,KA5CkB;;AAAA,wCA8CN,MAAM;AACjB,WAAKG,UAAL,CAAiB,mEAAjB,EAAqF,CAArF;AACD,KAhDkB;;AAAA,wCAkDN,MAAM;AACjB,WAAKA,UAAL,CAAiB,2DAAjB,EAA6E,CAA7E;AACD,KApDkB;;AAEjB,SAAKD,KAAL,GAAa;AACXF,MAAAA,IAAI,EAAE,CADK;AAEXD,MAAAA,IAAI,EAAE,IAFK;AAGXE,MAAAA,GAAG,EAAE;AAHM,KAAb;AAKD;;AAED,eAAaG,SAAb,CAAwBH,GAAxB,EAA6B;AAC3B,UAAMI,WAAW,GAAG,MAAMnB,KAAK,CAACe,GAAD,CAA/B;AACA,UAAMJ,QAAQ,GAAG,MAAMQ,WAAW,CAACT,IAAZ,EAAvB;AAEA,WAAO;AACLU,MAAAA,WAAW,EAAET,QAAQ,CAACE;AADjB,KAAP;AAGD;;AAED,SAAOQ,eAAP,CAAuB;AAAEC,IAAAA,GAAF;AAAOb,IAAAA;AAAP,GAAvB,EAAqC;AACnC,WAAO,KAAKS,SAAL,CAAgB,4DAAhB,CAAP;AACD;;AAEDK,EAAAA,qBAAqB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AAC1C,QAAIxB,OAAO,CAACuB,SAAD,EAAY,KAAKnB,KAAjB,CAAP,IAAkCJ,OAAO,CAACwB,SAAD,EAAY,KAAKT,KAAjB,CAA7C,EAAsE;AACpE,aAAO,KAAP;AACD;;AACD,WAAO,IAAP;AACD;;AA2BDU,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEN,MAAAA;AAAF,QAAkB,KAAKf,KAA7B;AACA,UAAM;AAAES,MAAAA,IAAF;AAAQD,MAAAA;AAAR,QAAiB,KAAKG,KAA5B;AACA,WACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,KAAD;AACE,MAAA,IAAI,EAAEH,IAAI,IAAIO,WADhB;AAEE,MAAA,WAAW,EAAE,KAAKO,WAFpB;AAGE,MAAA,UAAU,EAAE,KAAKC,UAHnB;AAIE,MAAA,UAAU,EAAE,KAAKC,UAJnB;AAKE,MAAA,UAAU,EAAEf,IALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAWD;;AArE+B;;AAwElC,eAAeX,SAAf","sourcesContent":["import React, { Component } from 'react';\nimport fetch from 'node-fetch';\nimport isEqual from 'lodash/isEqual';\nimport Table from '../home/components/table';\n\nclass HackerApp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 0,\n      hits: null,\n      url: 'https://hn.algolia.com/api/v1/search?hitsPerPage=30&page='\n    };\n  }\n\n  static async fetchData (url) {\n    const ApiResponse = await fetch(url);\n    const response = await ApiResponse.json();\n\n    return {\n      initialHits: response.hits\n    };\n  }\n\n  static getInitialProps({ req, res }) {\n    return this.fetchData(`https://hn.algolia.com/api/v1/search?hitsPerPage=30&page=0`);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (isEqual(nextProps, this.props) && isEqual(nextState, this.state)) {\n      return false;\n    }\n    return true;\n  }\n\n  getAPIData = (newUrl, newPage) => {\n    fetch(`${newUrl}${newPage}`)\n      .then(res => res.json().then(response => {\n        this.setState({\n          hits: response.hits,\n          page: newPage,\n          url: newUrl\n        });\n      })\n    )\n  }\n\n  onMoreClick = () => {\n    const { url, page } = this.state;\n    this.getAPIData(url, page + 1);\n  };\n\n  onNewClick = () => {\n    this.getAPIData(`https://hn.algolia.com/api/v1/search_by_date?hitsPerPage=30&page=`, 0);\n  };\n\n  onTopClick = () => {\n    this.getAPIData(`https://hn.algolia.com/api/v1/search?hitsPerPage=30&page=`, 0);\n  };\n\n  render() {\n    const { initialHits } = this.props;\n    const { page, hits } = this.state;\n    return (\n      <div className=\"App\">\n        <Table\n          hits={hits || initialHits}\n          onMoreClick={this.onMoreClick}\n          onNewClick={this.onNewClick}\n          onTopClick={this.onTopClick}\n          pageNumber={page}\n        />\n      </div>\n    );\n  }\n}\n\nexport default HackerApp;\n"]},"metadata":{},"sourceType":"module"}