{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/ipsbasak/Desktop/TGA/news-posts-tga/pages/home/index.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport fetch from 'node-fetch';\nimport isEqual from 'lodash/isEqual';\nimport Table from '../home/components/table';\n\nvar HackerApp = /*#__PURE__*/function (_Component) {\n  _inherits(HackerApp, _Component);\n\n  var _super = _createSuper(HackerApp);\n\n  function HackerApp(props) {\n    var _this;\n\n    _classCallCheck(this, HackerApp);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"getAPIData\", function (newUrl, newPage) {\n      fetch(\"\".concat(newUrl).concat(newPage)).then(function (res) {\n        return res.json().then(function (response) {\n          _this.setState({\n            hits: response.hits,\n            page: newPage,\n            url: newUrl\n          });\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMoreClick\", function () {\n      var _this$state = _this.state,\n          url = _this$state.url,\n          page = _this$state.page;\n\n      _this.getAPIData(url, page + 1);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onNewClick\", function () {\n      _this.getAPIData(\"https://hn.algolia.com/api/v1/search_by_date?hitsPerPage=30&page=\", 0);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onTopClick\", function () {\n      _this.getAPIData(\"https://hn.algolia.com/api/v1/search?hitsPerPage=30&page=\", 0);\n    });\n\n    _this.state = {\n      page: 0,\n      hits: null,\n      url: 'https://hn.algolia.com/api/v1/search?hitsPerPage=30&page='\n    };\n    return _this;\n  }\n\n  _createClass(HackerApp, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      if (isEqual(nextProps, this.props) && isEqual(nextState, this.state)) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var initialHits = this.props.initialHits;\n      var _this$state2 = this.state,\n          page = _this$state2.page,\n          hits = _this$state2.hits;\n      return __jsx(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 7\n        }\n      }, __jsx(Table, {\n        hits: hits || initialHits,\n        onMoreClick: this.onMoreClick,\n        onNewClick: this.onNewClick,\n        onTopClick: this.onTopClick,\n        pageNumber: page,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }\n      }));\n    }\n  }], [{\n    key: \"fetchData\",\n    value: function fetchData(url) {\n      var ApiResponse, response;\n      return _regeneratorRuntime.async(function fetchData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(fetch(url));\n\n            case 2:\n              ApiResponse = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(ApiResponse.json());\n\n            case 5:\n              response = _context.sent;\n              return _context.abrupt(\"return\", {\n                initialHits: response.hits\n              });\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var req = _ref.req,\n          res = _ref.res;\n      return this.fetchData(\"https://hn.algolia.com/api/v1/search?hitsPerPage=30&page=0\");\n    }\n  }]);\n\n  return HackerApp;\n}(Component);\n\nexport default HackerApp;","map":{"version":3,"sources":["/Users/ipsbasak/Desktop/TGA/news-posts-tga/pages/home/index.js"],"names":["React","Component","fetch","isEqual","Table","HackerApp","props","newUrl","newPage","then","res","json","response","setState","hits","page","url","state","getAPIData","nextProps","nextState","initialHits","onMoreClick","onNewClick","onTopClick","ApiResponse","req","fetchData"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,YAAlB;AACA,OAAOC,OAAP,MAAoB,gBAApB;AACA,OAAOC,KAAP,MAAkB,0BAAlB;;IAEMC,S;;;;;AACJ,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,iEA6BN,UAACC,MAAD,EAASC,OAAT,EAAqB;AAChCN,MAAAA,KAAK,WAAIK,MAAJ,SAAaC,OAAb,EAAL,CACGC,IADH,CACQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,GAAWF,IAAX,CAAgB,UAAAG,QAAQ,EAAI;AACvC,gBAAKC,QAAL,CAAc;AACZC,YAAAA,IAAI,EAAEF,QAAQ,CAACE,IADH;AAEZC,YAAAA,IAAI,EAAEP,OAFM;AAGZQ,YAAAA,GAAG,EAAET;AAHO,WAAd;AAKD,SANY,CAAJ;AAAA,OADX;AASD,KAvCkB;;AAAA,kEAyCL,YAAM;AAAA,wBACI,MAAKU,KADT;AAAA,UACVD,GADU,eACVA,GADU;AAAA,UACLD,IADK,eACLA,IADK;;AAElB,YAAKG,UAAL,CAAgBF,GAAhB,EAAqBD,IAAI,GAAG,CAA5B;AACD,KA5CkB;;AAAA,iEA8CN,YAAM;AACjB,YAAKG,UAAL,sEAAqF,CAArF;AACD,KAhDkB;;AAAA,iEAkDN,YAAM;AACjB,YAAKA,UAAL,8DAA6E,CAA7E;AACD,KApDkB;;AAEjB,UAAKD,KAAL,GAAa;AACXF,MAAAA,IAAI,EAAE,CADK;AAEXD,MAAAA,IAAI,EAAE,IAFK;AAGXE,MAAAA,GAAG,EAAE;AAHM,KAAb;AAFiB;AAOlB;;;;0CAeqBG,S,EAAWC,S,EAAW;AAC1C,UAAIjB,OAAO,CAACgB,SAAD,EAAY,KAAKb,KAAjB,CAAP,IAAkCH,OAAO,CAACiB,SAAD,EAAY,KAAKH,KAAjB,CAA7C,EAAsE;AACpE,eAAO,KAAP;AACD;;AACD,aAAO,IAAP;AACD;;;6BA2BQ;AAAA,UACCI,WADD,GACiB,KAAKf,KADtB,CACCe,WADD;AAAA,yBAEgB,KAAKJ,KAFrB;AAAA,UAECF,IAFD,gBAECA,IAFD;AAAA,UAEOD,IAFP,gBAEOA,IAFP;AAGP,aACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,KAAD;AACE,QAAA,IAAI,EAAEA,IAAI,IAAIO,WADhB;AAEE,QAAA,WAAW,EAAE,KAAKC,WAFpB;AAGE,QAAA,UAAU,EAAE,KAAKC,UAHnB;AAIE,QAAA,UAAU,EAAE,KAAKC,UAJnB;AAKE,QAAA,UAAU,EAAET,IALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAWD;;;8BA3DuBC,G;;;;;;;+CACId,KAAK,CAACc,GAAD,C;;;AAAzBS,cAAAA,W;;+CACiBA,WAAW,CAACd,IAAZ,E;;;AAAjBC,cAAAA,Q;+CAEC;AACLS,gBAAAA,WAAW,EAAET,QAAQ,CAACE;AADjB,e;;;;;;;;;;;0CAK4B;AAAA,UAAZY,GAAY,QAAZA,GAAY;AAAA,UAAPhB,GAAO,QAAPA,GAAO;AACnC,aAAO,KAAKiB,SAAL,8DAAP;AACD;;;;EArBqB1B,S;;AAwExB,eAAeI,SAAf","sourcesContent":["import React, { Component } from 'react';\nimport fetch from 'node-fetch';\nimport isEqual from 'lodash/isEqual';\nimport Table from '../home/components/table';\n\nclass HackerApp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 0,\n      hits: null,\n      url: 'https://hn.algolia.com/api/v1/search?hitsPerPage=30&page='\n    };\n  }\n\n  static async fetchData (url) {\n    const ApiResponse = await fetch(url);\n    const response = await ApiResponse.json();\n\n    return {\n      initialHits: response.hits\n    };\n  }\n\n  static getInitialProps({ req, res }) {\n    return this.fetchData(`https://hn.algolia.com/api/v1/search?hitsPerPage=30&page=0`);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (isEqual(nextProps, this.props) && isEqual(nextState, this.state)) {\n      return false;\n    }\n    return true;\n  }\n\n  getAPIData = (newUrl, newPage) => {\n    fetch(`${newUrl}${newPage}`)\n      .then(res => res.json().then(response => {\n        this.setState({\n          hits: response.hits,\n          page: newPage,\n          url: newUrl\n        });\n      })\n    )\n  }\n\n  onMoreClick = () => {\n    const { url, page } = this.state;\n    this.getAPIData(url, page + 1);\n  };\n\n  onNewClick = () => {\n    this.getAPIData(`https://hn.algolia.com/api/v1/search_by_date?hitsPerPage=30&page=`, 0);\n  };\n\n  onTopClick = () => {\n    this.getAPIData(`https://hn.algolia.com/api/v1/search?hitsPerPage=30&page=`, 0);\n  };\n\n  render() {\n    const { initialHits } = this.props;\n    const { page, hits } = this.state;\n    return (\n      <div className=\"App\">\n        <Table\n          hits={hits || initialHits}\n          onMoreClick={this.onMoreClick}\n          onNewClick={this.onNewClick}\n          onTopClick={this.onTopClick}\n          pageNumber={page}\n        />\n      </div>\n    );\n  }\n}\n\nexport default HackerApp;\n"]},"metadata":{},"sourceType":"module"}